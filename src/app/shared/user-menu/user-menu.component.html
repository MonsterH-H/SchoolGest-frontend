<!-- Avatar + Menu Utilisateur Minimaliste -->
<div class="relative">
  <!-- Bouton Avatar -->
  <button (click)="toggleUserMenu()"
    class="flex items-center justify-center h-8 w-8 rounded-full bg-transparent text-gray-400 hover:text-gray-600 transition duration-200 focus:outline-none">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
        d="M12 14c3.866 0 7 1.791 7 4v2H5v-2c0-2.209 3.134-4 7-4zm0-2a4 4 0 100-8 4 4 0 000 8z" />
    </svg>
  </button>

  <!-- Menu Utilisateur -->
  <div *ngIf="isUserMenuOpen"
    class="absolute right-0 mt-2 w-52 bg-white border border-gray-200 rounded-md shadow-md z-50 text-sm animate-fadeIn">

    <!-- Header -->
    <div class="px-4 py-3 border-b border-gray-100 text-gray-700">
      <p class="font-medium truncate">{{ user?.lastName || '' }} {{ user?.firstName || '' }}</p>
      <p class="text-xs text-gray-500 truncate">{{ user?.email }}</p>
      <p class="text-xs text-blue-600 font-medium" *ngIf="userRole">{{ userRole }}</p>
    </div>

    <!-- Items spécifiques au rôle -->
    <div class="flex flex-col py-1">

      <!-- Menu pour ENSEIGNANT -->
      <ng-container *ngIf="isTeacher">
        <a routerLink="/teacher/dashboard"
          class="px-4 py-2 hover:bg-gray-50 text-gray-700 transition flex items-center">
          <i class="lucide lucide-layout-dashboard w-4 h-4 mr-2 text-gray-400"></i> Tableau de bord
        </a>
        <a routerLink="/teacher/textbook"
          class="px-4 py-2 hover:bg-gray-50 text-gray-700 transition flex items-center">
          <i class="lucide lucide-book-open w-4 h-4 mr-2 text-gray-400"></i> Cahier de texte
        </a>
        <a routerLink="/teacher/attendance"
          class="px-4 py-2 hover:bg-gray-50 text-gray-700 transition flex items-center">
          <i class="lucide lucide-users w-4 h-4 mr-2 text-gray-400"></i> Présences
        </a>
        <a routerLink="/profile"
          class="px-4 py-2 hover:bg-gray-50 text-gray-700 transition flex items-center">
          <i class="lucide lucide-user w-4 h-4 mr-2 text-gray-400"></i> Mon profil
        </a>
      </ng-container>

      <!-- Menu pour ETUDIANT -->
      <ng-container *ngIf="isStudent">
        <a routerLink="/student/dashboard"
          class="px-4 py-2 hover:bg-gray-50 text-gray-700 transition flex items-center">
          <i class="lucide lucide-layout-dashboard w-4 h-4 mr-2 text-gray-400"></i> Mon tableau de bord
        </a>
        <a routerLink="/student/schedule" class="px-4 py-2 hover:bg-gray-50 text-gray-700 transition flex items-center">
          <i class="lucide lucide-calendar w-4 h-4 mr-2 text-gray-400"></i> Emploi du temps
        </a>
        <a routerLink="/student/grades"
          class="px-4 py-2 hover:bg-gray-50 text-gray-700 transition flex items-center">
          <i class="lucide lucide-file-text w-4 h-4 mr-2 text-gray-400"></i> Mes notes
        </a>
        <a routerLink="/profile"
          class="px-4 py-2 hover:bg-gray-50 text-gray-700 transition flex items-center">
          <i class="lucide lucide-user w-4 h-4 mr-2 text-gray-400"></i> Mon profil
        </a>
      </ng-container>

      <!-- Menu pour ADMIN (simple) -->
      <ng-container *ngIf="isAdmin">
        <a routerLink="/admin/dashboard" class="px-4 py-2 hover:bg-gray-50 text-gray-700 transition flex items-center">
          <i class="lucide lucide-layout-dashboard w-4 h-4 mr-2 text-gray-400"></i> Administration
        </a>
        <a routerLink="/profile" class="px-4 py-2 hover:bg-gray-50 text-gray-700 transition flex items-center">
          <i class="lucide lucide-user w-4 h-4 mr-2 text-gray-400"></i> Profil
        </a>
      </ng-container>

      <!-- Déconnexion (pour tous) -->
      <div class="border-t border-gray-100 my-1"></div>
      <button (click)="logout()"
        class="px-4 py-2 hover:bg-gray-50 text-red-500 transition flex items-center text-left w-full">
        <i class="lucide lucide-log-out w-4 h-4 mr-2"></i> Déconnexion
      </button>
    </div>
  </div>
</div>
